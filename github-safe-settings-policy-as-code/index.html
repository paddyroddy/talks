<!DOCTYPE html>
<html lang="en"><head>
<link href="..//assets/images/favicon.ico" rel="icon">
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-html/tabby.min.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark-8ea72dc5fed832574809a9c94082fbbb.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/quarto-contrib/qrcodejs-v1.0.0/qrcode.js"></script><meta charset="utf-8">
  <meta name="generator" content="quarto-1.6.40">

  <meta name="author" content="Patrick J. Roddy">
  <meta name="dcterms.date" content="2025-02-11">
  <title>GitHub Safe-Settings: Policy as Code</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
      }
    pre.numberSource { margin-left: 3em;  padding-left: 4px; }
    div.sourceCode
      { color: #f8f8f2;  }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #f8f8f2; } /* Normal */
    code span.al { color: #f07178; background-color: #2a0f15; font-weight: bold; } /* Alert */
    code span.an { color: #d4d0ab; } /* Annotation */
    code span.at { color: #00e0e0; } /* Attribute */
    code span.bn { color: #d4d0ab; } /* BaseN */
    code span.bu { color: #abe338; } /* BuiltIn */
    code span.cf { color: #ffa07a; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #abe338; } /* Char */
    code span.cn { color: #ffd700; } /* Constant */
    code span.co { color: #f8f8f2; font-style: italic; } /* Comment */
    code span.cv { color: #ffd700; } /* CommentVar */
    code span.do { color: #f8f8f2; } /* Documentation */
    code span.dt { color: #ffa07a; } /* DataType */
    code span.dv { color: #d4d0ab; } /* DecVal */
    code span.er { color: #f07178; text-decoration: underline; } /* Error */
    code span.ex { color: #00e0e0; font-weight: bold; } /* Extension */
    code span.fl { color: #d4d0ab; } /* Float */
    code span.fu { color: #ffa07a; } /* Function */
    code span.im { color: #abe338; } /* Import */
    code span.in { color: #d4d0ab; } /* Information */
    code span.kw { color: #ffa07a; font-weight: bold; } /* Keyword */
    code span.op { color: #ffa07a; } /* Operator */
    code span.ot { color: #00e0e0; } /* Other */
    code span.pp { color: #dcc6e0; } /* Preprocessor */
    code span.re { color: #00e0e0; background-color: #f8f8f2; } /* RegionMarker */
    code span.sc { color: #abe338; } /* SpecialChar */
    code span.ss { color: #abe338; } /* SpecialString */
    code span.st { color: #abe338; } /* String */
    code span.va { color: #00e0e0; } /* Variable */
    code span.vs { color: #abe338; } /* VerbatimString */
    code span.wa { color: #dcc6e0; } /* Warning */
  </style>
  <link rel="stylesheet" href="../site_libs/revealjs/dist/theme/quarto-ebc9c3b134aafdb0c5e4a7ead0f63fbc.css">
  <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-SCSTN0WCDT"></script>

  <script type="text/javascript">

  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-SCSTN0WCDT', { 'anonymize_ip': true});
  </script>
  <link href="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-dark">
  <div class="reveal">
    <div class="slides">

<section class="quarto-title-block center">
  <h1 class="title">GitHub Safe-Settings: Policy as Code</h1>
  <p class="subtitle"><a href="https://www.ucl.ac.uk/arc">ARC Collaborations Hour</a></p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
<a href="https://paddyroddy.github.io">Patrick J. Roddy</a> 
</div>
</div>
</div>

  <p class="date">2025-02-11</p>
</section>
<section class="title-slide slide level1 center" data-menu-title="QR Code">
<h1></h1>
<div>

</div>
<div class="quarto-layout-panel" data-layout="[22,78]">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 22.0%;justify-content: flex-start;">
<p>Scan to view the slides</p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 78.0%;justify-content: flex-start;">
<div id="" class="qrcode"></div>
<script type="text/javascript">
(function() {
  var script = document.currentScript;
  var qrcode = script.previousElementSibling;
  qrcode.qrcode = new QRCode(qrcode, {"colorDark":"#ffffff","colorLight":"#000000","height":"550","text":"https://paddyroddy.github.io/talks/github-safe-settings-policy-as-code","width":"550"});
  script.remove();
})();
</script>
    
</div>
</div>
</div>
</section>

<section>
<section class="title-slide slide level1 center">
<h1>Policy as Code</h1>

</section>
<section class="slide level2">
<h2>GitHub Settings</h2>
<div>

</div>
<div class="quarto-layout-panel" data-layout-ncol="2">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<ul>
<li class="fragment">Repository settings can easily be changed in the UI.</li>
<li class="fragment">Depending on collaborators permissions, they can change them too.</li>
<li class="fragment">Might turn something on/off and lose record.</li>
<li class="fragment">How to enforce for all repositories?</li>
</ul>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><img data-src="figures/settings.png"></p>
</div>
</div>
</div>
</section>
<section class="slide level2">
<h2><a href="https://github.com/github/safe-settings">GitHub Safe-Settings</a></h2>
<p>An app to manage policy-as-code and apply repository settings across an organisation.</p>
<ol type="1">
<li class="fragment">Create an <code>admin</code> repo (or an alternative of your choosing) within your organisation.</li>
<li class="fragment">Add the settings for the <code>org</code>, <code>suborgs</code>, and <code>repos</code> in YAML files.</li>
<li class="fragment">Deploy and install the app. Alternatively, the <code>safe-settings</code> can be run with GitHub Actions.</li>
</ol>
</section></section>
<section>
<section class="title-slide slide level1 center">
<h1>App Overview</h1>

</section>
<section class="slide level2" data-menu-title="Overview (i)">
<h2></h2>
<ul>
<li class="fragment">In <code>safe-settings</code>, all the settings are stored centrally in an <code>admin</code> repo within the organisation. Unlike the <a href="https://github.com/repository-settings/app">GitHub Repository Settings App</a>, the settings files cannot be in individual repositories.</li>
<li class="fragment">The <strong>settings</strong> in the <strong>default</strong> branch are applied. If the settings are changed on a non-default branch and a PR is created to merge the changes, the app runs in a <code>dry-run</code> mode to evaluate and validate the changes. Checks pass or fail based on the <code>dry-run</code> results.</li>
</ul>
</section>
<section class="slide level2" data-menu-title="Overview (ii)">
<h2></h2>
<ul>
<li class="fragment">In <code>safe-settings</code> the settings can have 2 types of targets:
<ul>
<li class="fragment"><code>org</code> - These settings are applied to the organisation. <code>Org</code>-targeted settings are defined in <code>.github/settings.yaml</code>. Currently, only <code>rulesets</code> are supported as <code>org</code>-targeted settings.</li>
<li class="fragment"><code>repo</code> - These settings are applied to repositories.</li>
</ul></li>
</ul>
</section>
<section class="slide level2" data-menu-title="Overview (iii)">
<h2></h2>
<ul>
<li class="fragment">For the <code>repo</code>-targeted settings, there can be 3 levels at which the settings are managed:
<ul>
<li class="fragment"><code>Org</code>-level settings are defined in <code>.github/settings.yaml</code>.</li>
<li class="fragment"><code>Suborg</code> level settings. A <code>suborg</code> is an arbitrary collection of repos belonging to projects, business units, or teams. The <code>suborg</code> settings reside in a YAML file for each <code>suborg</code> in the <code>.github/suborgs</code> folder.</li>
<li class="fragment"><code>Repo</code> level settings. They reside in a repo specific YAML in <code>.github/repos</code> folder.</li>
</ul></li>
</ul>
</section>
<section class="slide level2" data-menu-title="Overview (iv)">
<h2></h2>
<ul>
<li class="fragment">It is recommended to break the settings into <code>org</code>-level, <code>suborg</code>-level, and <code>repo</code>-level units. This will allow different teams to define and manage policies for their specific projects or business units. With <code>CODEOWNERS</code>, this will allow different people to be responsible for approving changes in different projects.</li>
</ul>
</section>
<section class="slide level2">
<h2>How it Works</h2>
<p><code>Safe-settings</code> is designed to run as a service listening for webhook events or as a scheduled job running on some regular cadence. It can also be triggered through GitHub Actions.</p>
</section>
<section class="slide level2">
<h2>Events</h2>
<p>The App listens to the following webhook events:</p>
<div>

</div>
<div class="quarto-layout-panel" data-layout-ncol="2">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<ul>
<li class="fragment"><strong>push</strong></li>
<li class="fragment"><strong>repository.created</strong></li>
<li class="fragment"><strong>branch_protection_rule</strong></li>
<li class="fragment"><strong>repository.edited</strong></li>
<li class="fragment"><strong>repository.renamed</strong></li>
<li class="fragment"><strong>pull_request.opened</strong>, <strong>pull_request.reopened</strong>, <strong>check_suite.requested</strong></li>
</ul>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<ul>
<li class="fragment"><strong>repository_ruleset</strong></li>
<li class="fragment"><strong>member_change_events</strong></li>
<li class="fragment"><strong>member</strong>’, <strong>team.added_to_repository</strong>, <strong>team.removed_from_repository</strong>, <strong>team.edited</strong></li>
<li class="fragment"><strong>custom_property_values</strong></li>
</ul>
</div>
</div>
</div>
</section>
<section class="slide level2">
<h2><a href="https://github.com/github/safe-settings/blob/main-enterprise/docs/sample-settings/sample-deployment-settings.yml">Deployment Settings</a></h2>
<div class="sourceCode" id="cb1" data-code-line-numbers="1|1-5|1,6-7|8|8-14|15|16-33|34-38"><pre class="sourceCode numberSource yaml number-lines code-with-copy"><code class="sourceCode yaml"><span id="cb1-1"><a></a><span class="fu">restrictedRepos</span><span class="kw">:</span></span>
<span id="cb1-2"><a></a><span class="co">  # You can exclude certain repos from safe-settings processing</span></span>
<span id="cb1-3"><a></a><span class="co">  # If no file is specified, then the following repositories -</span></span>
<span id="cb1-4"><a></a><span class="co">  # 'admin', '.github', 'safe-settings' are exempted by default</span></span>
<span id="cb1-5"><a></a><span class="at">  </span><span class="fu">exclude</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="st">'^admin$'</span><span class="kw">,</span><span class="at"> </span><span class="st">'^\.github$'</span><span class="kw">,</span><span class="at"> </span><span class="st">'^safe-settings$'</span><span class="kw">,</span><span class="at"> </span><span class="st">'.*-test'</span><span class="kw">]</span></span>
<span id="cb1-6"><a></a><span class="co">  # Alternatively you can only include certain repos</span></span>
<span id="cb1-7"><a></a><span class="at">  </span><span class="fu">include</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="st">'^test$'</span><span class="kw">]</span></span>
<span id="cb1-8"><a></a><span class="fu">configvalidators</span><span class="kw">:</span></span>
<span id="cb1-9"><a></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">plugin</span><span class="kw">:</span><span class="at"> collaborators</span></span>
<span id="cb1-10"><a></a><span class="fu">    error</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb1-11"><a></a>      `Admin cannot be assigned to collaborators`</span>
<span id="cb1-12"><a></a><span class="fu">    script</span><span class="kw">: </span><span class="ch">|-</span></span>
<span id="cb1-13"><a></a>      console.log(`baseConfig ${JSON.stringify(baseconfig)}`)</span>
<span id="cb1-14"><a></a>      return baseconfig.permission != 'admin'</span>
<span id="cb1-15"><a></a><span class="fu">overridevalidators</span><span class="kw">:</span></span>
<span id="cb1-16"><a></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">plugin</span><span class="kw">:</span><span class="at"> branches</span></span>
<span id="cb1-17"><a></a><span class="fu">    error</span><span class="kw">: </span><span class="ch">|-</span></span>
<span id="cb1-18"><a></a>      `Branch protection required_approving_review_count</span>
<span id="cb1-19"><a></a>      cannot be overridden to a lower value`</span>
<span id="cb1-20"><a></a><span class="fu">    script</span><span class="kw">: </span><span class="ch">|-</span></span>
<span id="cb1-21"><a></a>      console.log(`baseConfig ${JSON.stringify(baseconfig)}`)</span>
<span id="cb1-22"><a></a>      console.log(`overrideConfig ${JSON.stringify(overrideconfig)}`)</span>
<span id="cb1-23"><a></a>      if (</span>
<span id="cb1-24"><a></a>        baseconfig.protection.required_pull_request_reviews.required_approving_review_count</span>
<span id="cb1-25"><a></a>        &amp;&amp;</span>
<span id="cb1-26"><a></a>        overrideconfig.protection.required_pull_request_reviews.required_approving_review_count</span>
<span id="cb1-27"><a></a>      ) {</span>
<span id="cb1-28"><a></a>        return</span>
<span id="cb1-29"><a></a>        overrideconfig.protection.required_pull_request_reviews.required_approving_review_count</span>
<span id="cb1-30"><a></a>        &gt;=</span>
<span id="cb1-31"><a></a>        baseconfig.protection.required_pull_request_reviews.required_approving_review_count</span>
<span id="cb1-32"><a></a>      }</span>
<span id="cb1-33"><a></a>      return true</span>
<span id="cb1-34"><a></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">plugin</span><span class="kw">:</span><span class="at"> labels</span></span>
<span id="cb1-35"><a></a><span class="fu">    error</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb1-36"><a></a>      Some error</span>
<span id="cb1-37"><a></a><span class="fu">    script</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb1-38"><a></a>      return true</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section class="slide level2" data-menu-title="Performance (i)">
<h2>Performance</h2>
<p>When there are 1000s of repos to be managed – and there is a global settings change – safe-settings will have to work efficiently and only make the necessary API calls.</p>
<p>The app also has to complete the work within an hour: the lifetime of the GitHub app token.</p>
<p>To address these constraints the following design decisions have been implemented:</p>
</section>
<section class="slide level2" data-menu-title="Performance (ii)">
<h2>Performance</h2>
<ul>
<li class="fragment"><code>Probot</code> automatically handles <code>rate</code> and <code>abuse</code> limits.</li>
<li class="fragment">Instead of loading all the repo contents from <code>.github/repos/*</code>, it will selectively load the specific repo file based on which <code>repo</code> settings has changed, or a subset of the repo files associated with <code>suborg</code> settings that has changed. The only time all the repo files will be loaded is if there is a <code>global</code> settings file change.</li>
</ul>
</section>
<section class="slide level2" data-menu-title="Performance (iii)">
<h2>Performance</h2>
<ul>
<li class="fragment">The PR check will only provide a summary of errors and changes (providing the details of changes for 1000s of repos will error out).</li>
<li class="fragment">To ensure it handles updates to GitHub intelligently, it will compare the changes with the settings in GitHub, and will call the API only if there are <code>real</code> changes.</li>
</ul>
</section>
<section class="slide level2">
<h2>The Settings Files</h2>
<p>The settings files can be used to set the policies at the <code>org</code>, <code>suborg</code> or <code>repo</code> level.</p>
<p>The following can be configured:</p>
<div>

</div>
<div class="quarto-layout-panel" data-layout-ncol="4">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 25.0%;justify-content: flex-start;">
<ul>
<li class="fragment">Repository settings</li>
<li class="fragment">Default branch</li>
<li class="fragment">Topics</li>
<li class="fragment">Custom properties</li>
</ul>
</div>
<div class="quarto-layout-cell" style="flex-basis: 25.0%;justify-content: flex-start;">
<ul>
<li class="fragment">Teams and permissions</li>
<li class="fragment">Collaborators and permissions</li>
<li class="fragment">Issue labels</li>
</ul>
</div>
<div class="quarto-layout-cell" style="flex-basis: 25.0%;justify-content: flex-start;">
<ul>
<li class="fragment">Milestones</li>
<li class="fragment">Branch protections</li>
<li class="fragment">Autolinks</li>
</ul>
</div>
<div class="quarto-layout-cell" style="flex-basis: 25.0%;justify-content: flex-start;">
<ul>
<li class="fragment">Repository name validation</li>
<li class="fragment">Rulesets</li>
<li class="fragment">Environments</li>
</ul>
</div>
</div>
</div>
</section>
<section class="slide level2">
<h2>Things to Note</h2>
<ul>
<li class="fragment">Label colour can also start with <code>#</code>, e.g.&nbsp;<code>color: '#F341B2'</code>. Make sure to wrap it with quotes!</li>
<li class="fragment">Each top-level element under branch protection must be filled (eg: <code>required_pull_request_reviews</code>, <code>required_status_checks</code>, <code>enforce_admins</code> and <code>restrictions</code>). If you don’t want to use one of them you must set it to <code>null</code> (see comments in the example above). Otherwise, none of the settings will be applied.</li>
<li class="fragment">The precedence order is repository &gt; suborg &gt; org.</li>
</ul>
</section></section>
<section>
<section class="title-slide slide level1 center">
<h1><a href="https://github.com/UCL-MIRSG/.github">Example Configuration</a></h1>

</section>
<section class="slide level2" data-menu-title="Deployment Settings">
<h2><a href="https://github.com/UCL-MIRSG/.github/blob/main/safe-settings/deployment.yaml">./safe-settings/deployment.yaml</a></h2>
<div class="sourceCode" id="cb2" data-code-line-numbers="1|1-4|5-69"><pre class="sourceCode numberSource yaml number-lines code-with-copy"><code class="sourceCode yaml"><span id="cb2-1"><a></a><span class="fu">restrictedRepos</span><span class="kw">:</span></span>
<span id="cb2-2"><a></a><span class="co">  # these repos are all archived and will cause the GHA to fail</span></span>
<span id="cb2-3"><a></a><span class="co">  # https://github.com/github/safe-settings/issues/443</span></span>
<span id="cb2-4"><a></a><span class="at">  </span><span class="fu">exclude</span><span class="kw">:</span></span>
<span id="cb2-5"><a></a><span class="at">    </span><span class="kw">-</span><span class="at"> ^AboutMeGateway$</span></span>
<span id="cb2-6"><a></a><span class="at">    </span><span class="kw">-</span><span class="at"> ^admin$</span></span>
<span id="cb2-7"><a></a><span class="at">    </span><span class="kw">-</span><span class="at"> ^ansible-collection-infrastructure-archive$</span></span>
<span id="cb2-8"><a></a><span class="at">    </span><span class="kw">-</span><span class="at"> ^ansible-collection-omero$</span></span>
<span id="cb2-9"><a></a><span class="at">    </span><span class="kw">-</span><span class="at"> ^ansible-collection-xnat$</span></span>
<span id="cb2-10"><a></a><span class="at">    </span><span class="kw">-</span><span class="at"> ^ansible-collection-xnat-archive$</span></span>
<span id="cb2-11"><a></a><span class="at">    </span><span class="kw">-</span><span class="at"> ^ansible-role-docker$</span></span>
<span id="cb2-12"><a></a><span class="at">    </span><span class="kw">-</span><span class="at"> ^ansible-role-firewalld$</span></span>
<span id="cb2-13"><a></a><span class="at">    </span><span class="kw">-</span><span class="at"> ^ansible-role-install-java$</span></span>
<span id="cb2-14"><a></a><span class="at">    </span><span class="kw">-</span><span class="at"> ^ansible-role-install-python$</span></span>
<span id="cb2-15"><a></a><span class="at">    </span><span class="kw">-</span><span class="at"> ^ansible-role-omero-web$</span></span>
<span id="cb2-16"><a></a><span class="at">    </span><span class="kw">-</span><span class="at"> ^ansible-role-postgresql$</span></span>
<span id="cb2-17"><a></a><span class="at">    </span><span class="kw">-</span><span class="at"> ^ansible-role-provision$</span></span>
<span id="cb2-18"><a></a><span class="at">    </span><span class="kw">-</span><span class="at"> ^ansible-role-selinux-utils$</span></span>
<span id="cb2-19"><a></a><span class="at">    </span><span class="kw">-</span><span class="at"> ^ansible-role-ssl-certificates$</span></span>
<span id="cb2-20"><a></a><span class="at">    </span><span class="kw">-</span><span class="at"> ^ansible-role-template$</span></span>
<span id="cb2-21"><a></a><span class="at">    </span><span class="kw">-</span><span class="at"> ^ansible-role-tomcat$</span></span>
<span id="cb2-22"><a></a><span class="at">    </span><span class="kw">-</span><span class="at"> ^catch-srv-plugin$</span></span>
<span id="cb2-23"><a></a><span class="at">    </span><span class="kw">-</span><span class="at"> ^chenies-mews-cleanup$</span></span>
<span id="cb2-24"><a></a><span class="at">    </span><span class="kw">-</span><span class="at"> ^cmic-xnat-plugin$</span></span>
<span id="cb2-25"><a></a><span class="at">    </span><span class="kw">-</span><span class="at"> ^comic100_dax_config$</span></span>
<span id="cb2-26"><a></a><span class="at">    </span><span class="kw">-</span><span class="at"> ^despiad_customizations$</span></span>
<span id="cb2-27"><a></a><span class="at">    </span><span class="kw">-</span><span class="at"> ^DevOps-Knowledge-Base$</span></span>
<span id="cb2-28"><a></a><span class="at">    </span><span class="kw">-</span><span class="at"> ^DicomAnonUtils$</span></span>
<span id="cb2-29"><a></a><span class="at">    </span><span class="kw">-</span><span class="at"> ^drc_cluster_dax_config$</span></span>
<span id="cb2-30"><a></a><span class="at">    </span><span class="kw">-</span><span class="at"> ^exo-flim$</span></span>
<span id="cb2-31"><a></a><span class="at">    </span><span class="kw">-</span><span class="at"> ^flimj-ops$</span></span>
<span id="cb2-32"><a></a><span class="at">    </span><span class="kw">-</span><span class="at"> ^flimj-ops-scripts$</span></span>
<span id="cb2-33"><a></a><span class="at">    </span><span class="kw">-</span><span class="at"> ^flimj-ui$</span></span>
<span id="cb2-34"><a></a><span class="at">    </span><span class="kw">-</span><span class="at"> ^flimlib$</span></span>
<span id="cb2-35"><a></a><span class="at">    </span><span class="kw">-</span><span class="at"> ^general_bulk_uploader$</span></span>
<span id="cb2-36"><a></a><span class="at">    </span><span class="kw">-</span><span class="at"> ^gif_extras$</span></span>
<span id="cb2-37"><a></a><span class="at">    </span><span class="kw">-</span><span class="at"> ^github-actions-maven$</span></span>
<span id="cb2-38"><a></a><span class="at">    </span><span class="kw">-</span><span class="at"> ^Infrastructure$</span></span>
<span id="cb2-39"><a></a><span class="at">    </span><span class="kw">-</span><span class="at"> ^LocalDevMedicalImagingEnv$</span></span>
<span id="cb2-40"><a></a><span class="at">    </span><span class="kw">-</span><span class="at"> ^MIRSE-Research-and-Documentation$</span></span>
<span id="cb2-41"><a></a><span class="at">    </span><span class="kw">-</span><span class="at"> ^mirsg-github-runner-docker$</span></span>
<span id="cb2-42"><a></a><span class="at">    </span><span class="kw">-</span><span class="at"> ^mirsg-harvester-terraform-modules$</span></span>
<span id="cb2-43"><a></a><span class="at">    </span><span class="kw">-</span><span class="at"> ^mirsg-xnat-user-documentation$</span></span>
<span id="cb2-44"><a></a><span class="at">    </span><span class="kw">-</span><span class="at"> ^module_segmentation$</span></span>
<span id="cb2-45"><a></a><span class="at">    </span><span class="kw">-</span><span class="at"> ^NCCID-clinical-datatype-for-Covid19-XNAT$</span></span>
<span id="cb2-46"><a></a><span class="at">    </span><span class="kw">-</span><span class="at"> ^NCCID-clinical-datatype-release$</span></span>
<span id="cb2-47"><a></a><span class="at">    </span><span class="kw">-</span><span class="at"> ^nccid-data-transfer$</span></span>
<span id="cb2-48"><a></a><span class="at">    </span><span class="kw">-</span><span class="at"> ^NiftyPipe$</span></span>
<span id="cb2-49"><a></a><span class="at">    </span><span class="kw">-</span><span class="at"> ^NiftyPipe-Data$</span></span>
<span id="cb2-50"><a></a><span class="at">    </span><span class="kw">-</span><span class="at"> ^nimg1946-legacy-scripts$</span></span>
<span id="cb2-51"><a></a><span class="at">    </span><span class="kw">-</span><span class="at"> ^nipype$</span></span>
<span id="cb2-52"><a></a><span class="at">    </span><span class="kw">-</span><span class="at"> ^omero-ansible-sandpit$</span></span>
<span id="cb2-53"><a></a><span class="at">    </span><span class="kw">-</span><span class="at"> ^OmeroInstaller$</span></span>
<span id="cb2-54"><a></a><span class="at">    </span><span class="kw">-</span><span class="at"> ^OmeroInstallerConfig$</span></span>
<span id="cb2-55"><a></a><span class="at">    </span><span class="kw">-</span><span class="at"> ^promis-omero-import$</span></span>
<span id="cb2-56"><a></a><span class="at">    </span><span class="kw">-</span><span class="at"> ^protocols$</span></span>
<span id="cb2-57"><a></a><span class="at">    </span><span class="kw">-</span><span class="at"> ^reimagine-bulk-uploader$</span></span>
<span id="cb2-58"><a></a><span class="at">    </span><span class="kw">-</span><span class="at"> ^SUMMITCOVIDGateway$</span></span>
<span id="cb2-59"><a></a><span class="at">    </span><span class="kw">-</span><span class="at"> ^test-gha-arc$</span></span>
<span id="cb2-60"><a></a><span class="at">    </span><span class="kw">-</span><span class="at"> ^ucl-xsync$</span></span>
<span id="cb2-61"><a></a><span class="at">    </span><span class="kw">-</span><span class="at"> ^uclh-gae-clinical-gateway$</span></span>
<span id="cb2-62"><a></a><span class="at">    </span><span class="kw">-</span><span class="at"> ^xnat$</span></span>
<span id="cb2-63"><a></a><span class="at">    </span><span class="kw">-</span><span class="at"> ^xnat-1946$</span></span>
<span id="cb2-64"><a></a><span class="at">    </span><span class="kw">-</span><span class="at"> ^xnat-azure-template-terraform$</span></span>
<span id="cb2-65"><a></a><span class="at">    </span><span class="kw">-</span><span class="at"> ^xnat-azure-terraform$</span></span>
<span id="cb2-66"><a></a><span class="at">    </span><span class="kw">-</span><span class="at"> ^XNAT-FTD$</span></span>
<span id="cb2-67"><a></a><span class="at">    </span><span class="kw">-</span><span class="at"> ^xnat-helper$</span></span>
<span id="cb2-68"><a></a><span class="at">    </span><span class="kw">-</span><span class="at"> ^xnat-setup$</span></span>
<span id="cb2-69"><a></a><span class="at">    </span><span class="kw">-</span><span class="at"> ^XnatInstaller$</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section class="slide level2" data-menu-title="Organisation Settings">
<h2><a href="https://github.com/UCL-MIRSG/.github/blob/main/safe-settings/organisation.yaml">./safe-settings/organisation.yaml</a></h2>
<div class="sourceCode" id="cb3" data-code-line-numbers="1-4|6-15|17-19"><pre class="sourceCode numberSource yaml number-lines code-with-copy"><code class="sourceCode yaml"><span id="cb3-1"><a></a><span class="fu">autolinks</span><span class="kw">:</span></span>
<span id="cb3-2"><a></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">key_prefix</span><span class="kw">:</span><span class="at"> ARCMYS-</span></span>
<span id="cb3-3"><a></a><span class="at">    </span><span class="fu">url_template</span><span class="kw">:</span><span class="at"> https://myservices-arc.uk.4me.com/requests/&lt;num&gt;</span></span>
<span id="cb3-4"><a></a><span class="at">    </span><span class="fu">is_alphanumeric</span><span class="kw">:</span><span class="at"> </span><span class="ch">false</span></span>
<span id="cb3-5"><a></a></span>
<span id="cb3-6"><a></a><span class="fu">repository</span><span class="kw">:</span></span>
<span id="cb3-7"><a></a><span class="at">  </span><span class="fu">allow_auto_merge</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb3-8"><a></a><span class="at">  </span><span class="fu">allow_merge_commit</span><span class="kw">:</span><span class="at"> </span><span class="ch">false</span></span>
<span id="cb3-9"><a></a><span class="at">  </span><span class="fu">allow_rebase_merge</span><span class="kw">:</span><span class="at"> </span><span class="ch">false</span></span>
<span id="cb3-10"><a></a><span class="at">  </span><span class="fu">delete_branch_on_merge</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb3-11"><a></a><span class="at">  </span><span class="fu">has_discussions</span><span class="kw">:</span><span class="at"> </span><span class="ch">false</span></span>
<span id="cb3-12"><a></a><span class="at">  </span><span class="fu">has_downloads</span><span class="kw">:</span><span class="at"> </span><span class="ch">false</span></span>
<span id="cb3-13"><a></a><span class="at">  </span><span class="fu">has_wiki</span><span class="kw">:</span><span class="at"> </span><span class="ch">false</span></span>
<span id="cb3-14"><a></a><span class="at">  </span><span class="fu">squash_merge_commit_message</span><span class="kw">:</span><span class="at"> PR_BODY</span></span>
<span id="cb3-15"><a></a><span class="at">  </span><span class="fu">squash_merge_commit_title</span><span class="kw">:</span><span class="at"> PR_TITLE</span></span>
<span id="cb3-16"><a></a></span>
<span id="cb3-17"><a></a><span class="fu">teams</span><span class="kw">:</span></span>
<span id="cb3-18"><a></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> mirsg</span></span>
<span id="cb3-19"><a></a><span class="at">    </span><span class="fu">permission</span><span class="kw">:</span><span class="at"> admin</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section class="slide level2" data-menu-title="Suborgs Settings">
<h2><a href="https://github.com/UCL-MIRSG/.github/blob/main/safe-settings/suborgs/rulesets.yaml">./safe-settings/suborgs/rulesets.yaml</a></h2>
<div class="sourceCode" id="cb4" data-code-line-numbers="1-2|4|4-17|19-43|45-64"><pre class="sourceCode numberSource yaml number-lines code-with-copy"><code class="sourceCode yaml"><span id="cb4-1"><a></a><span class="fu">suborgrepos</span><span class="kw">:</span></span>
<span id="cb4-2"><a></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="st">"*"</span></span>
<span id="cb4-3"><a></a></span>
<span id="cb4-4"><a></a><span class="fu">rulesets</span><span class="kw">:</span></span>
<span id="cb4-5"><a></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Default</span></span>
<span id="cb4-6"><a></a><span class="at">    </span><span class="fu">target</span><span class="kw">:</span><span class="at"> branch</span></span>
<span id="cb4-7"><a></a><span class="at">    </span><span class="fu">enforcement</span><span class="kw">:</span><span class="at"> active</span></span>
<span id="cb4-8"><a></a></span>
<span id="cb4-9"><a></a><span class="at">    </span><span class="fu">conditions</span><span class="kw">:</span></span>
<span id="cb4-10"><a></a><span class="at">      </span><span class="fu">ref_name</span><span class="kw">:</span></span>
<span id="cb4-11"><a></a><span class="at">        </span><span class="fu">include</span><span class="kw">:</span></span>
<span id="cb4-12"><a></a><span class="at">          </span><span class="kw">-</span><span class="at"> ~DEFAULT_BRANCH</span></span>
<span id="cb4-13"><a></a><span class="at">        </span><span class="fu">exclude</span><span class="kw">:</span><span class="at"> </span><span class="kw">[]</span></span>
<span id="cb4-14"><a></a></span>
<span id="cb4-15"><a></a><span class="at">    </span><span class="fu">rules</span><span class="kw">:</span></span>
<span id="cb4-16"><a></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">type</span><span class="kw">:</span><span class="at"> deletion</span></span>
<span id="cb4-17"><a></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">type</span><span class="kw">:</span><span class="at"> non_fast_forward</span><span class="co"> # prevents force pushes</span></span>
<span id="cb4-18"><a></a></span>
<span id="cb4-19"><a></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Pull Requests</span></span>
<span id="cb4-20"><a></a><span class="at">    </span><span class="fu">target</span><span class="kw">:</span><span class="at"> branch</span></span>
<span id="cb4-21"><a></a><span class="at">    </span><span class="fu">enforcement</span><span class="kw">:</span><span class="at"> active</span></span>
<span id="cb4-22"><a></a></span>
<span id="cb4-23"><a></a><span class="at">    </span><span class="fu">bypass_actors</span><span class="kw">:</span></span>
<span id="cb4-24"><a></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">actor_id</span><span class="kw">:</span><span class="at"> </span><span class="dv">2740</span><span class="co"> # Renovate Bot</span></span>
<span id="cb4-25"><a></a><span class="at">        </span><span class="fu">actor_type</span><span class="kw">:</span><span class="at"> Integration</span></span>
<span id="cb4-26"><a></a><span class="at">        </span><span class="fu">bypass_mode</span><span class="kw">:</span><span class="at"> always</span></span>
<span id="cb4-27"><a></a></span>
<span id="cb4-28"><a></a><span class="at">    </span><span class="fu">conditions</span><span class="kw">:</span></span>
<span id="cb4-29"><a></a><span class="at">      </span><span class="fu">ref_name</span><span class="kw">:</span></span>
<span id="cb4-30"><a></a><span class="at">        </span><span class="fu">include</span><span class="kw">:</span></span>
<span id="cb4-31"><a></a><span class="at">          </span><span class="kw">-</span><span class="at"> ~DEFAULT_BRANCH</span></span>
<span id="cb4-32"><a></a><span class="at">        </span><span class="fu">exclude</span><span class="kw">:</span><span class="at"> </span><span class="kw">[]</span></span>
<span id="cb4-33"><a></a></span>
<span id="cb4-34"><a></a><span class="at">    </span><span class="fu">rules</span><span class="kw">:</span></span>
<span id="cb4-35"><a></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">type</span><span class="kw">:</span><span class="at"> pull_request</span></span>
<span id="cb4-36"><a></a><span class="at">        </span><span class="fu">parameters</span><span class="kw">:</span></span>
<span id="cb4-37"><a></a><span class="at">          </span><span class="fu">allowed_merge_types</span><span class="kw">:</span></span>
<span id="cb4-38"><a></a><span class="at">            </span><span class="kw">-</span><span class="at"> squash</span></span>
<span id="cb4-39"><a></a><span class="at">          </span><span class="fu">dismiss_stale_reviews_on_push</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb4-40"><a></a><span class="at">          </span><span class="fu">require_code_owner_review</span><span class="kw">:</span><span class="at"> </span><span class="ch">false</span></span>
<span id="cb4-41"><a></a><span class="at">          </span><span class="fu">require_last_push_approval</span><span class="kw">:</span><span class="at"> </span><span class="ch">false</span></span>
<span id="cb4-42"><a></a><span class="at">          </span><span class="fu">required_approving_review_count</span><span class="kw">:</span><span class="at"> </span><span class="dv">1</span></span>
<span id="cb4-43"><a></a><span class="at">          </span><span class="fu">required_review_thread_resolution</span><span class="kw">:</span><span class="at"> </span><span class="ch">false</span></span>
<span id="cb4-44"><a></a></span>
<span id="cb4-45"><a></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Status Checks</span></span>
<span id="cb4-46"><a></a><span class="at">    </span><span class="fu">target</span><span class="kw">:</span><span class="at"> branch</span></span>
<span id="cb4-47"><a></a><span class="at">    </span><span class="fu">enforcement</span><span class="kw">:</span><span class="at"> active</span></span>
<span id="cb4-48"><a></a></span>
<span id="cb4-49"><a></a><span class="at">    </span><span class="fu">conditions</span><span class="kw">:</span></span>
<span id="cb4-50"><a></a><span class="at">      </span><span class="fu">ref_name</span><span class="kw">:</span></span>
<span id="cb4-51"><a></a><span class="at">        </span><span class="fu">include</span><span class="kw">:</span></span>
<span id="cb4-52"><a></a><span class="at">          </span><span class="kw">-</span><span class="at"> ~DEFAULT_BRANCH</span></span>
<span id="cb4-53"><a></a><span class="at">        </span><span class="fu">exclude</span><span class="kw">:</span><span class="at"> </span><span class="kw">[]</span></span>
<span id="cb4-54"><a></a></span>
<span id="cb4-55"><a></a><span class="at">    </span><span class="fu">rules</span><span class="kw">:</span></span>
<span id="cb4-56"><a></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">type</span><span class="kw">:</span><span class="at"> required_status_checks</span></span>
<span id="cb4-57"><a></a><span class="at">        </span><span class="fu">parameters</span><span class="kw">:</span></span>
<span id="cb4-58"><a></a><span class="at">          </span><span class="fu">do_not_enforce_on_create</span><span class="kw">:</span><span class="at"> </span><span class="ch">false</span></span>
<span id="cb4-59"><a></a><span class="at">          </span><span class="fu">required_status_checks</span><span class="kw">:</span></span>
<span id="cb4-60"><a></a><span class="at">            </span><span class="kw">-</span><span class="at"> </span><span class="fu">context</span><span class="kw">:</span><span class="at"> links</span></span>
<span id="cb4-61"><a></a><span class="at">              </span><span class="fu">integration_id</span><span class="kw">:</span><span class="at"> </span><span class="dv">15368</span></span>
<span id="cb4-62"><a></a><span class="at">            </span><span class="kw">-</span><span class="at"> </span><span class="fu">context</span><span class="kw">:</span><span class="at"> linting</span></span>
<span id="cb4-63"><a></a><span class="at">              </span><span class="fu">integration_id</span><span class="kw">:</span><span class="at"> </span><span class="dv">15368</span></span>
<span id="cb4-64"><a></a><span class="at">          </span><span class="fu">strict_required_status_checks_policy</span><span class="kw">:</span><span class="at"> </span><span class="ch">false</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section class="slide level2" data-menu-title="GitHub Action">
<h2><a href="https://github.com/UCL-MIRSG/.github/blob/main/.github/workflows/safe-settings.yaml">GitHub Action</a></h2>
<div class="sourceCode" id="cb5" data-code-line-numbers="1|2|2-5|2,6-9|2,10-11|2,12|14-18|20-22|20,23-25|20,26|26-28|30-35|37-43|45-47|49-52|52-53,55-59,64,66|54,60-63,65"><pre class="sourceCode numberSource yaml number-lines code-with-copy"><code class="sourceCode yaml"><span id="cb5-1"><a></a><span class="fu">name</span><span class="kw">:</span><span class="at"> Safe Settings Sync</span></span>
<span id="cb5-2"><a></a><span class="fu">on</span><span class="kw">:</span></span>
<span id="cb5-3"><a></a><span class="at">  </span><span class="fu">push</span><span class="kw">:</span></span>
<span id="cb5-4"><a></a><span class="at">    </span><span class="fu">branches</span><span class="kw">:</span></span>
<span id="cb5-5"><a></a><span class="at">      </span><span class="kw">-</span><span class="at"> main</span></span>
<span id="cb5-6"><a></a><span class="at">  </span><span class="fu">pull_request</span><span class="kw">:</span></span>
<span id="cb5-7"><a></a><span class="at">    </span><span class="fu">paths</span><span class="kw">:</span></span>
<span id="cb5-8"><a></a><span class="at">      </span><span class="kw">-</span><span class="at"> safe-settings/**</span></span>
<span id="cb5-9"><a></a><span class="at">      </span><span class="kw">-</span><span class="at"> .github/workflows/safe-settings.yaml</span></span>
<span id="cb5-10"><a></a><span class="at">  </span><span class="fu">schedule</span><span class="kw">:</span></span>
<span id="cb5-11"><a></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">cron</span><span class="kw">:</span><span class="at"> 0 */4 * * *</span></span>
<span id="cb5-12"><a></a><span class="at">  </span><span class="fu">workflow_dispatch</span><span class="kw">:</span><span class="at"> </span><span class="kw">{}</span></span>
<span id="cb5-13"><a></a></span>
<span id="cb5-14"><a></a><span class="fu">concurrency</span><span class="kw">:</span></span>
<span id="cb5-15"><a></a><span class="at">  </span><span class="fu">cancel-in-progress</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb5-16"><a></a><span class="fu">  group</span><span class="kw">: </span><span class="ch">&gt;-</span></span>
<span id="cb5-17"><a></a>    ${{ github.workflow }}-${{</span>
<span id="cb5-18"><a></a>    github.event.pull_request.number || github.ref }}</span>
<span id="cb5-19"><a></a></span>
<span id="cb5-20"><a></a><span class="fu">jobs</span><span class="kw">:</span></span>
<span id="cb5-21"><a></a><span class="at">  </span><span class="fu">safe-settings-sync</span><span class="kw">:</span></span>
<span id="cb5-22"><a></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ubuntu-latest</span></span>
<span id="cb5-23"><a></a><span class="at">    </span><span class="fu">env</span><span class="kw">:</span></span>
<span id="cb5-24"><a></a><span class="at">      </span><span class="fu">SAFE_SETTINGS_VERSION</span><span class="kw">:</span><span class="at"> </span><span class="fl">2.1.14</span></span>
<span id="cb5-25"><a></a><span class="at">      </span><span class="fu">SAFE_SETTINGS_CODE_DIR</span><span class="kw">:</span><span class="at"> .safe-settings-code</span></span>
<span id="cb5-26"><a></a><span class="at">    </span><span class="fu">steps</span><span class="kw">:</span></span>
<span id="cb5-27"><a></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Checkout source</span></span>
<span id="cb5-28"><a></a><span class="at">        </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683</span><span class="co"> # v4</span></span>
<span id="cb5-29"><a></a></span>
<span id="cb5-30"><a></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Checkout GitHub Safe-Settings repository</span></span>
<span id="cb5-31"><a></a><span class="at">        </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683</span><span class="co"> # v4</span></span>
<span id="cb5-32"><a></a><span class="at">        </span><span class="fu">with</span><span class="kw">:</span></span>
<span id="cb5-33"><a></a><span class="at">          </span><span class="fu">path</span><span class="kw">:</span><span class="at"> ${{ env.SAFE_SETTINGS_CODE_DIR }}</span></span>
<span id="cb5-34"><a></a><span class="at">          </span><span class="fu">ref</span><span class="kw">:</span><span class="at"> ${{ env.SAFE_SETTINGS_VERSION }}</span></span>
<span id="cb5-35"><a></a><span class="at">          </span><span class="fu">repository</span><span class="kw">:</span><span class="at"> github/safe-settings</span></span>
<span id="cb5-36"><a></a></span>
<span id="cb5-37"><a></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Setup Node.js</span></span>
<span id="cb5-38"><a></a><span class="at">        </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/setup-node@39370e3970a6d050c480ffad4ff0ed4d3fdee5af</span><span class="co"> # v4</span></span>
<span id="cb5-39"><a></a><span class="at">        </span><span class="fu">with</span><span class="kw">:</span></span>
<span id="cb5-40"><a></a><span class="at">          </span><span class="fu">cache-dependency-path</span><span class="kw">:</span></span>
<span id="cb5-41"><a></a><span class="at">            ${{ env.SAFE_SETTINGS_CODE_DIR }}/package-lock.json</span></span>
<span id="cb5-42"><a></a><span class="at">          </span><span class="fu">cache</span><span class="kw">:</span><span class="at"> npm</span></span>
<span id="cb5-43"><a></a><span class="at">          </span><span class="fu">node-version-file</span><span class="kw">:</span><span class="at"> ${{ env.SAFE_SETTINGS_CODE_DIR }}/.nvmrc</span></span>
<span id="cb5-44"><a></a></span>
<span id="cb5-45"><a></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Install dependencies</span></span>
<span id="cb5-46"><a></a><span class="at">        </span><span class="fu">run</span><span class="kw">:</span><span class="at"> npm install</span></span>
<span id="cb5-47"><a></a><span class="at">        </span><span class="fu">working-directory</span><span class="kw">:</span><span class="at"> ${{ env.SAFE_SETTINGS_CODE_DIR }}</span></span>
<span id="cb5-48"><a></a></span>
<span id="cb5-49"><a></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Run application</span></span>
<span id="cb5-50"><a></a><span class="at">        </span><span class="fu">run</span><span class="kw">:</span><span class="at"> npm run full-sync</span></span>
<span id="cb5-51"><a></a><span class="at">        </span><span class="fu">working-directory</span><span class="kw">:</span><span class="at"> ${{ env.SAFE_SETTINGS_CODE_DIR }}</span></span>
<span id="cb5-52"><a></a><span class="at">        </span><span class="fu">env</span><span class="kw">:</span></span>
<span id="cb5-53"><a></a><span class="at">          </span><span class="fu">ADMIN_REPO</span><span class="kw">:</span><span class="at"> .github</span></span>
<span id="cb5-54"><a></a><span class="at">          </span><span class="fu">APP_ID</span><span class="kw">:</span><span class="at"> ${{ vars.SAFE_SETTINGS_APP_ID }}</span></span>
<span id="cb5-55"><a></a><span class="at">          </span><span class="fu">BLOCK_REPO_RENAME_BY_HUMAN</span><span class="kw">:</span><span class="at"> </span><span class="ch">false</span></span>
<span id="cb5-56"><a></a><span class="at">          </span><span class="fu">CONFIG_PATH</span><span class="kw">:</span><span class="at"> safe-settings</span></span>
<span id="cb5-57"><a></a><span class="at">          </span><span class="fu">DEPLOYMENT_CONFIG_FILE</span><span class="kw">:</span></span>
<span id="cb5-58"><a></a><span class="at">            ${{ github.workspace }}/safe-settings/deployment.yaml</span></span>
<span id="cb5-59"><a></a><span class="at">          </span><span class="fu">ENABLE_PR_COMMENT</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb5-60"><a></a><span class="at">          </span><span class="fu">GH_ORG</span><span class="kw">:</span><span class="at"> ${{ vars.SAFE_SETTINGS_GH_ORG }}</span></span>
<span id="cb5-61"><a></a><span class="at">          </span><span class="fu">GITHUB_CLIENT_ID</span><span class="kw">:</span><span class="at"> ${{ vars.SAFE_SETTINGS_GITHUB_CLIENT_ID }}</span></span>
<span id="cb5-62"><a></a><span class="at">          </span><span class="fu">GITHUB_CLIENT_SECRET</span><span class="kw">:</span></span>
<span id="cb5-63"><a></a><span class="at">            ${{ secrets.SAFE_SETTINGS_GITHUB_CLIENT_SECRET }}</span></span>
<span id="cb5-64"><a></a><span class="at">          </span><span class="fu">LOG_LEVEL</span><span class="kw">:</span><span class="at"> trace</span></span>
<span id="cb5-65"><a></a><span class="at">          </span><span class="fu">PRIVATE_KEY</span><span class="kw">:</span><span class="at"> ${{ secrets.SAFE_SETTINGS_PRIVATE_KEY }}</span></span>
<span id="cb5-66"><a></a><span class="at">          </span><span class="fu">SETTINGS_FILE_PATH</span><span class="kw">:</span><span class="at"> organisation.yaml</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section class="slide level2">
<h2><a href="https://github.com/UCL-MIRSG/.github/blob/main/.renovaterc.json5">Renovate Configuration</a></h2>
<p>See <a href="https://paddyroddy.github.io/talks/renovate-automating-dependency-management" class="uri">https://paddyroddy.github.io/talks/renovate-automating-dependency-management</a> for my previous talk on Renovate.</p>
<div class="sourceCode" id="cb6" data-code-line-numbers="2|3|4-13"><pre class="sourceCode numberSource json5 number-lines code-with-copy"><code class="sourceCode"><span id="cb6-1"><a></a>{</span>
<span id="cb6-2"><a></a>  $schema: "https://docs.renovatebot.com/renovate-schema.json",</span>
<span id="cb6-3"><a></a>  extends: ["github&gt;UCL-MIRSG/.github//renovate/default-config.json5"],</span>
<span id="cb6-4"><a></a>  customManagers: [</span>
<span id="cb6-5"><a></a>    {</span>
<span id="cb6-6"><a></a>      customType: "regex",</span>
<span id="cb6-7"><a></a>      description: "Update GitHub Safe-Settings version",</span>
<span id="cb6-8"><a></a>      fileMatch: [".github/workflows/safe-settings.yaml$"],</span>
<span id="cb6-9"><a></a>      matchStrings: ["SAFE_SETTINGS_VERSION:\\s(?&lt;currentValue&gt;.*)"],</span>
<span id="cb6-10"><a></a>      depNameTemplate: "github/safe-settings",</span>
<span id="cb6-11"><a></a>      datasourceTemplate: "github-releases",</span>
<span id="cb6-12"><a></a>    },</span>
<span id="cb6-13"><a></a>  ],</span>
<span id="cb6-14"><a></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section></section>
<section>
<section class="title-slide slide level1 center">
<h1>GitHub App</h1>

</section>
<section class="slide level2">
<h2>Creation</h2>
<ul>
<li class="fragment"><a href="https://docs.github.com/en/apps/creating-github-apps/registering-a-github-app/registering-a-github-app">Register new GitHub App</a>.</li>
<li class="fragment">Give the app a unique name.</li>
<li class="fragment">Give the app a description.</li>
<li class="fragment">Give the app a homepage URL, e.g.&nbsp;<a href="https://github.com/github/safe-settings" class="uri">https://github.com/github/safe-settings</a>.</li>
<li class="fragment">Optionally disable <code>Expire user authorization tokens</code>.</li>
<li class="fragment">Disable webhook (assuming using GHA workflow).</li>
<li class="fragment">Give the following permissions:</li>
</ul>
</section>
<section class="slide level2" data-menu-title="Permissions (i)">
<h2>Permissions</h2>
<h3>Repository</h3>
<table class="caption-top">
<thead>
<tr class="header">
<th>Read-only</th>
<th>Read and write</th>
<th></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Actions</td>
<td>Administration</td>
<td>Environments</td>
</tr>
<tr class="even">
<td>Metadata</td>
<td>Checks</td>
<td>Issues</td>
</tr>
<tr class="odd">
<td></td>
<td>Commit statuses</td>
<td>Pull requests</td>
</tr>
<tr class="even">
<td></td>
<td>Contents</td>
<td>Variables</td>
</tr>
<tr class="odd">
<td></td>
<td>Custom properties</td>
<td></td>
</tr>
</tbody>
</table>
</section>
<section class="slide level2" data-menu-title="Permissions (i)">
<h2>Permissions</h2>
<h3>Organisation</h3>
<table class="caption-top">
<thead>
<tr class="header">
<th>Read and write</th>
<th>Admin</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Administration</td>
<td>Custom properties</td>
</tr>
<tr class="even">
<td>Members</td>
<td></td>
</tr>
</tbody>
</table>
<h3>Account</h3>
<p>None</p>
</section>
<section class="slide level2" data-menu-title="Next Septs (i)">
<h2>Next Steps</h2>
<div>

</div>
<div class="quarto-layout-panel" data-layout-ncol="2">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<ul>
<li class="fragment"><code>Where can this GitHub App be installed?</code> Only on this account.</li>
<li class="fragment">Create GitHub app.</li>
<li class="fragment">Generate a new client secret.</li>
<li class="fragment">Generate a private key.</li>
<li class="fragment">Optionally create a logo.</li>
</ul>
</div>
<div class="fragment fade-left quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><img data-src="figures/logo.png"></p>
</div>
</div>
</div>
</section>
<section class="slide level2" data-menu-title="Next Septs (ii)">
<h2>Next Steps</h2>
<ul>
<li class="fragment">Create the following environment variables:
<ul>
<li class="fragment"><code>secrets.SAFE_SETTINGS_GITHUB_CLIENT_SECRET</code></li>
<li class="fragment"><code>secrets.SAFE_SETTINGS_PRIVATE_KEY</code></li>
<li class="fragment"><code>vars.SAFE_SETTINGS_APP_ID</code></li>
<li class="fragment"><code>vars.SAFE_SETTINGS_GH_ORG</code></li>
<li class="fragment"><code>vars.SAFE_SETTINGS_GITHUB_CLIENT_ID</code></li>
</ul></li>
<li class="fragment">Install the app organisation wide.</li>
</ul>
</section>
<section class="slide level2">
<h2>Alternative Set Up</h2>
<p>Follow the steps to <a href="https://docs.github.com/en/apps/sharing-github-apps/registering-a-github-app-from-a-manifest">register a GitHub App from a manifest</a>.</p>
<div class="sourceCode" id="cb7" data-code-line-numbers="1-13|14-28|30|32|34"><pre class="sourceCode numberSource yaml number-lines code-with-copy"><code class="sourceCode yaml"><span id="cb7-1"><a></a><span class="fu">default_events</span><span class="kw">:</span></span>
<span id="cb7-2"><a></a><span class="at">  </span><span class="kw">-</span><span class="at"> branch_protection_rule</span></span>
<span id="cb7-3"><a></a><span class="at">  </span><span class="kw">-</span><span class="at"> check_run</span></span>
<span id="cb7-4"><a></a><span class="at">  </span><span class="kw">-</span><span class="at"> check_suite</span></span>
<span id="cb7-5"><a></a><span class="at">  </span><span class="kw">-</span><span class="at"> create</span></span>
<span id="cb7-6"><a></a><span class="at">  </span><span class="kw">-</span><span class="at"> custom_property_values</span></span>
<span id="cb7-7"><a></a><span class="at">  </span><span class="kw">-</span><span class="at"> member</span></span>
<span id="cb7-8"><a></a><span class="at">  </span><span class="kw">-</span><span class="at"> pull_request</span></span>
<span id="cb7-9"><a></a><span class="at">  </span><span class="kw">-</span><span class="at"> push</span></span>
<span id="cb7-10"><a></a><span class="at">  </span><span class="kw">-</span><span class="at"> repository</span></span>
<span id="cb7-11"><a></a><span class="at">  </span><span class="kw">-</span><span class="at"> repository_ruleset</span></span>
<span id="cb7-12"><a></a><span class="at">  </span><span class="kw">-</span><span class="at"> team</span></span>
<span id="cb7-13"><a></a></span>
<span id="cb7-14"><a></a><span class="fu">default_permissions</span><span class="kw">:</span></span>
<span id="cb7-15"><a></a><span class="at">    </span><span class="fu">actions</span><span class="kw">:</span><span class="at"> read</span></span>
<span id="cb7-16"><a></a><span class="at">    </span><span class="fu">administration</span><span class="kw">:</span><span class="at"> write</span></span>
<span id="cb7-17"><a></a><span class="at">    </span><span class="fu">checks</span><span class="kw">:</span><span class="at"> write</span></span>
<span id="cb7-18"><a></a><span class="at">    </span><span class="fu">contents</span><span class="kw">:</span><span class="at"> write</span></span>
<span id="cb7-19"><a></a><span class="at">    </span><span class="fu">environments</span><span class="kw">:</span><span class="at"> write</span></span>
<span id="cb7-20"><a></a><span class="at">    </span><span class="fu">issues</span><span class="kw">:</span><span class="at"> write</span></span>
<span id="cb7-21"><a></a><span class="at">    </span><span class="fu">members</span><span class="kw">:</span><span class="at"> write</span></span>
<span id="cb7-22"><a></a><span class="at">    </span><span class="fu">metadata</span><span class="kw">:</span><span class="at"> read</span></span>
<span id="cb7-23"><a></a><span class="at">    </span><span class="fu">organization_administration</span><span class="kw">:</span><span class="at"> write</span></span>
<span id="cb7-24"><a></a><span class="at">    </span><span class="fu">organization_custom_properties</span><span class="kw">:</span><span class="at"> admin</span></span>
<span id="cb7-25"><a></a><span class="at">    </span><span class="fu">pull_requests</span><span class="kw">:</span><span class="at"> write</span></span>
<span id="cb7-26"><a></a><span class="at">    </span><span class="fu">repository_custom_properties</span><span class="kw">:</span><span class="at"> write</span></span>
<span id="cb7-27"><a></a><span class="at">    </span><span class="fu">statuses</span><span class="kw">:</span><span class="at"> write</span></span>
<span id="cb7-28"><a></a><span class="at">    </span><span class="fu">variables</span><span class="kw">:</span><span class="at"> write</span></span>
<span id="cb7-29"><a></a></span>
<span id="cb7-30"><a></a><span class="fu">name</span><span class="kw">:</span><span class="at"> Safe Settings</span></span>
<span id="cb7-31"><a></a></span>
<span id="cb7-32"><a></a><span class="fu">url</span><span class="kw">:</span><span class="at"> https://github.com/github/safe-settings</span></span>
<span id="cb7-33"><a></a></span>
<span id="cb7-34"><a></a><span class="fu">public</span><span class="kw">:</span><span class="at"> </span><span class="ch">false</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section></section>
<section>
<section class="title-slide slide level1 center">
<h1>Conclusions</h1>

</section>
<section class="slide level2" data-menu-title="Summary">
<h2></h2>
<ul>
<li class="fragment">The ability to manage repository settings through version control.</li>
<li class="fragment">Can create and/or restrict what repositories are made.</li>
<li class="fragment">Can relax in the knowledge that new repositories will have settings that you expect.</li>
<li class="fragment">Very quick even with many settings applied.</li>
<li class="fragment">Actively developed.</li>
<li class="fragment">Hosted on <a href="https://github.com/github" class="uri">https://github.com/github</a>.</li>
<li class="fragment">Can deploy in many different ways.</li>
</ul>
</section>
<section class="slide level2">
<h2>Demo</h2>
<p><a href="https://github.com/UCL-MIRSG/.github/actions"><img data-src="figures/demo.png"></a></p>


</section></section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<div class="footer footer-default">
<p>GitHub Safe-Settings: Policy as Code - <a href="https://paddyroddy.github.io/talks" class="uri">https://paddyroddy.github.io/talks</a></p>
</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: false,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'fade',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const onCopySuccess = function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      }
      const getTextToCopy = function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
        text: getTextToCopy
      });
      clipboard.on('success', onCopySuccess);
      if (window.document.getElementById('quarto-embedded-source-code-modal')) {
        const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
          text: getTextToCopy,
          container: window.document.getElementById('quarto-embedded-source-code-modal')
        });
        clipboardModal.on('success', onCopySuccess);
      }
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp("https:\/\/paddyroddy\.github\.io\/talks\/");
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
              // default icon
              link.classList.add("external");
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>