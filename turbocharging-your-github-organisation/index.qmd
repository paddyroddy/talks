---
author: "[Patrick J. Roddy](https://paddyroddy.github.io)"
date: 2024-12-12
format: revealjs
subtitle:
  "[ARC DevOPS
  Hour](https://www.ucl.ac.uk/advanced-research-computing/collaborations-consultancy/devops-collaborations)"
title: Turbocharging Your GitHub Organisation
---

{{< include /_includes/qr-code.qmd >}}

# {data-menu-title="Note"}

::: {.callout-note}

Much of this talk holds true for personal GitHub accounts as well as GitHub
organisations. However, it is not always the case. I will focus solely on
organisational accounts here.

:::

# Special Repositories

## .github-private

The `/profile/README.md` will appear on the GitHub organisation's member
profile, visible only to organisation members.

![](figures/private_readme.png)

## .github {data-menu-title=".github (i)"}

The `/profile/README.md` will appear on the organisation's profile.

![](figures/public_readme.png)

## .github {data-menu-title=".github (ii)"}

Can add issue templates in `/.github/ISSUE_TEMPLATE` that will be seen in all
organisation repositories, unless the repository itself specifies its own set of
issue templates.

![](figures/issue_templates.png)

## .github {data-menu-title=".github (iii)"}

Configure `/.github/ISSUE_TEMPLATE/config.yml`.

```yaml
blank_issues_enabled: true
contact_links:
  - name: General MIRSG issue
    url: https://github.com/UCL-MIRSG/MIRSG/issues/new/choose
    about: If your issue is a general...
```

![](figures/config.png)

## .github {data-menu-title=".github (iv)"}

Add a default `/CONTRIBUTING.md`.

![](figures/contributing.png)

## .github {data-menu-title=".github (v)"}

Add a default `/CODE_OF_CONDUCT.md`.

![](figures/code_of_conduct.png)

# Tools

## Renovate {data-menu-title="Renovate (i)"}

:::{layout-ncol=2}

I previously gave talk on Renovate
<https://paddyroddy.github.io/talks/renovate-automating-dependency-management>

{{< qrcode https://paddyroddy.github.io/talks/renovate-automating-dependency-management
colorDark="#ffffff" colorLight="#000000" height=550 width=550 >}}

:::

## Renovate {data-menu-title="Renovate (ii)"}

Organisation-wide [Renovate](https://docs.renovatebot.com) configuration, e.g.
`/renovate/default-config.json`. The
[UCL-ARC/.github](https://github.com/UCL-ARC/.github/tree/main/renovate) one
currently:

```{.json code-line-numbers="2|3-12|13|14,55|15-25|26-30|31-40|41-46|47-54"}
{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": [
    "config:best-practices",
    "schedule:automergeWeekdays",
    "schedule:monthly",
    ":automergeBranch",
    ":disableDependencyDashboard",
    ":enablePreCommit",
    ":label(renovate)",
    ":prHourlyLimitNone"
  ],
  "commitMessageAction": "Renovate:",
  "packageRules": [
    {
      "description": "Automatically merge, minor and patch-level updates",
      "automerge": true,
      "matchManagers": [
        "dockerfile",
        "github-actions",
        "pre-commit",
        "terraform"
      ],
      "matchUpdateTypes": ["digest", "minor", "patch"]
    },
    {
      "description": "Shorten commit titles",
      "commitMessageTopic": "{{depName}}",
      "matchManagers": ["github-actions", "pre-commit"]
    },
    {
      "description": "Combine action artefact updates together",
      "groupName": "artefacts",
      "matchDepNames": [
        "actions/deploy-pages",
        "actions/download-artifact",
        "actions/upload-artifact",
        "actions/upload-pages-artifact"
      ]
    },
    {
      "description": "Only allow major updates",
      "enabled": false,
      "matchDepNames": ["renovatebot/pre-commit-hooks"],
      "matchUpdateTypes": ["minor", "patch", "pin"]
    },
    {
      "description": "Support loose versioning",
      "matchDepNames": [
        "cmhughes/latexindent.pl",
        "shellcheck-py/shellcheck-py"
      ],
      "versioning": "loose"
    }
  ]
}
```

## Renovate {data-menu-title="Renovate (iii)"}

This can be then be used in organisation repositories as as follows, e.g.
`/.renovaterc.json5`.

```json5
{
  $schema: "https://docs.renovatebot.com/renovate-schema.json",
  extends: ["github>UCL-ARC/.github//renovate/default-config.json"],
}
```

## Renovate {data-menu-title="Renovate (iv)"}

This can then be debugged at <https://developer.mend.io>.

![](figures/renovate.png)

## Other Things to Store in `.github` {data-menu-title=".github (i)"}

Organisation-wide [pre-commit](https://pre-commit.com) configuration,
`/precommit/mirsg-hooks.yaml`. Can be referenced as follows.

```yaml
repos:
  - repo: https://github.com/UCL-MIRSG/.github
    rev: v0.133.0
    hooks:
      - id: mirsg-hooks
```

See this in action in
[UCL-MIRSG/.github](https://github.com/UCL-MIRSG/.github/tree/main/precommit).
